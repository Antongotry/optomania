{{ header }}
<div class="container-xl flex-grow-1">
	<nav aria-label="breadcrumb">
        <ul class="breadcrumb pr-breadcrumb fsz-12">
        {% for breadcrumb in breadcrumbs %}
            {% if loop.last %}
                <li class="breadcrumb-item pr-breadcrumb-item">{{ breadcrumb.text }}</li>
            {% else %}
                <li class="breadcrumb-item pr-breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
            {% endif %}
        {% endfor %}
        </ul>
    </nav>
	<main>
		{% if oct_promo_data.micro is defined and oct_promo_data.micro %}
			<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "BreadcrumbList",
				"itemListElement":
				[
					{% for breadcrumb in breadcrumbs %}
						{% if loop.first %}
						{% else %}
						{
							"@type": "ListItem",
							"position": {{ loop.index -1 }},
							"item":
							{
								"@id": "{{ breadcrumb.href }}",
								"name": "{{ breadcrumb.text }}"
							}
						}{% if not loop.last %},{% endif %}
						{% endif %}
					{% endfor %}
				]
			}
			</script>
			<script type="application/ld+json">{{ article_microdata|raw }}</script>
		{% endif %}
		<div class="content-top-box">{{ content_top }}</div>
		<div class="row g-3 g-xxl-4 pr-blog-post">
			{{ column_left }}
			{% if column_left and column_right %}
				{% set class = 'col-xl-6' %}
			{% elseif column_left or column_right %}
				{% set class = 'col-xl-9' %}
			{% else %}
				{% set class = 'col-xl-12' %}
			{% endif %}
			<div id="content" class="{{ class }}">
				<div class="content-block">
					<div class="pr-page-title mb-4">
						<h1>{{ heading_title }}</h1>
					</div>
					{% if thumb %}
						<img src="{{ thumb }}" alt="{{ heading_title }}" class="img-fluid mb-4 br-8" width="{{ thumb_width }}" height="{{ thumb_height }}" />
					{% endif %}
					<div class="pr-blog-post-text pb-4 mb-4 border-bottom">
						{{ description }}
						{% if tags %}
							<p class="pr-product-tags">{{ text_tags }}
								{% for i in 0..tags | length - 1 %}
									<a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>{% if i < (tags|length - 1) %},{% endif %}
								{% endfor %}
							</p>
						{% endif %}
					</div>
					{% if images %}
						<div class="pr-blog-photo-gallery pb-4 mb-4 border-bottom">
							<div class="fsz-20 fw-700 mb-4">{{ entry_dop_photo }}</div>
							<div class="d-flex align-items-stretch gap-3">
								{% for image in images %}
									<a href="{{ image.popup }}" data-fancybox="images" class="pr-blog-photo-gallery-item br-4 overflow-hidden">
										<img class="img-fluid" src="{{ image.thumb }}" alt="" width="{{ image.thumb_width }}" height="{{ image.thumb_height }}" loading="lazy" aria-label="Open gallery" />
										<span class="d-none d-xl-flex align-items-center justify-content-center"></span>
									</a>
								{% endfor %}
							</div>
						</div>
					{% endif %}
					<div class="pr-blog-info pb-4 mb-4 border-bottom">
						<div class="d-flex align-items-center gap-4 fsz-14">
							<div class="pr-blog-info-item pr-blog-info-item-date d-flex align-items-center">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
									<path d="M1 6.5H19M5 0.5V2.5M15 0.5V2.5M5.5 10.5C5.5 10.7761 5.27614 11 5 11C4.72386 11 4.5 10.7761 4.5 10.5M5.5 10.5C5.5 10.2239 5.27614 10 5 10C4.72386 10 4.5 10.2239 4.5 10.5M5.5 10.5H4.5M10.5 10.5C10.5 10.7761 10.2761 11 10 11C9.72386 11 9.5 10.7761 9.5 10.5M10.5 10.5C10.5 10.2239 10.2761 10 10 10C9.72386 10 9.5 10.2239 9.5 10.5M10.5 10.5H9.5M15.5 10.5C15.5 10.7761 15.2761 11 15 11C14.7239 11 14.5 10.7761 14.5 10.5M15.5 10.5C15.5 10.2239 15.2761 10 15 10C14.7239 10 14.5 10.2239 14.5 10.5M15.5 10.5H14.5M5.5 15.5C5.5 15.7761 5.27614 16 5 16C4.72386 16 4.5 15.7761 4.5 15.5M5.5 15.5C5.5 15.2239 5.27614 15 5 15C4.72386 15 4.5 15.2239 4.5 15.5M5.5 15.5H4.5M10.5 15.5C10.5 15.7761 10.2761 16 10 16C9.72386 16 9.5 15.7761 9.5 15.5M10.5 15.5C10.5 15.2239 10.2761 15 10 15C9.72386 15 9.5 15.2239 9.5 15.5M10.5 15.5H9.5M15.5 15.5C15.5 15.7761 15.2761 16 15 16C14.7239 16 14.5 15.7761 14.5 15.5M15.5 15.5C15.5 15.2239 15.2761 15 15 15C14.7239 15 14.5 15.2239 14.5 15.5M15.5 15.5H14.5M4 19.5H16C17.6569 19.5 19 18.1569 19 16.5V4.5C19 2.84315 17.6569 1.5 16 1.5H4C2.34315 1.5 1 2.84315 1 4.5V16.5C1 18.1569 2.34315 19.5 4 19.5Z" stroke="#9DA4AE" stroke-linecap="round" stroke-linejoin="round"></path>
								</svg>
								<span class="ms-2">{{ date_added }}</span>
							</div>
							{% if review_status %}
								<div class="pr-blog-info-item pr-blog-info-item-comments d-flex align-items-center">
									<svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" viewBox="0 0 22 20" fill="none">
										<path d="M6 16.5002H6.5C6.5 16.2241 6.27614 16.0002 6 16.0002V16.5002ZM11.2628 16.9696L10.9943 16.5478L11.2628 16.9696ZM7.53706 19.3417L7.80558 19.7634H7.80559L7.53706 19.3417ZM15 7.00024C15.2761 7.00024 15.5 6.77639 15.5 6.50024C15.5 6.2241 15.2761 6.00024 15 6.00024V7.00024ZM7 6.00024C6.72386 6.00024 6.5 6.2241 6.5 6.50024C6.5 6.77639 6.72386 7.00024 7 7.00024V6.00024ZM12 11.0002C12.2761 11.0002 12.5 10.7764 12.5 10.5002C12.5 10.2241 12.2761 10.0002 12 10.0002V11.0002ZM7 10.0002C6.72386 10.0002 6.5 10.2241 6.5 10.5002C6.5 10.7764 6.72386 11.0002 7 11.0002V10.0002ZM4 1.00024H18V0.000244141H4V1.00024ZM20.5 3.50024V13.5002H21.5V3.50024H20.5ZM1.5 13.5002V3.50024H0.5V13.5002H1.5ZM6.5 18.4981V16.5002H5.5V18.4981H6.5ZM6 16.0002H4V17.0002H6V16.0002ZM18 16.0002H12.874V17.0002H18V16.0002ZM10.9943 16.5478L7.26853 18.9199L7.80559 19.7634L11.5313 17.3914L10.9943 16.5478ZM12.874 16.0002C12.2081 16.0002 11.556 16.1902 10.9943 16.5478L11.5313 17.3914C11.9325 17.1359 12.3983 17.0002 12.874 17.0002V16.0002ZM5.5 18.4981C5.5 19.6819 6.80701 20.3992 7.80558 19.7634L7.26853 18.9199C6.93567 19.1318 6.5 18.8927 6.5 18.4981H5.5ZM0.5 13.5002C0.5 15.4332 2.067 17.0002 4 17.0002V16.0002C2.61929 16.0002 1.5 14.881 1.5 13.5002H0.5ZM20.5 13.5002C20.5 14.881 19.3807 16.0002 18 16.0002V17.0002C19.933 17.0002 21.5 15.4332 21.5 13.5002H20.5ZM18 1.00024C19.3807 1.00024 20.5 2.11953 20.5 3.50024H21.5C21.5 1.56725 19.933 0.000244141 18 0.000244141V1.00024ZM4 0.000244141C2.067 0.000244141 0.5 1.56725 0.5 3.50024H1.5C1.5 2.11953 2.61929 1.00024 4 1.00024V0.000244141ZM15 6.00024H7V7.00024H15V6.00024ZM12 10.0002H7V11.0002H12V10.0002Z" fill="#9DA4AE"></path>
									</svg>
									<span class="ms-2">{{ comments_total }}</span>
								</div>
							{% endif %}
							<div class="pr-blog-info-item pr-blog-info-item-views d-flex align-items-center">
								<svg xmlns="http://www.w3.org/2000/svg" width="22" height="18" viewBox="0 0 22 18" fill="none">
									<path d="M20.8775 8.39517C21.0421 8.78595 21.0421 9.21405 20.8775 9.60483C20.0922 11.4688 17.2364 17 10.9983 17C4.75911 17 1.90667 11.4669 1.12309 9.60386C0.958971 9.21367 0.95897 8.78634 1.12309 8.39614C1.90667 6.53313 4.75911 1 10.9983 1C17.2364 1 20.0922 6.53122 20.8775 8.39517Z" stroke="#9DA4AE" stroke-linecap="round" stroke-linejoin="round"></path>
									<path d="M15.0008 9C15.0008 11.2091 13.2099 13 11.0008 13C8.79162 13 7.00076 11.2091 7.00076 9C7.00076 6.79086 8.79162 5 11.0008 5C13.2099 5 15.0008 6.79086 15.0008 9Z" stroke="#9DA4AE" stroke-linecap="round" stroke-linejoin="round"></path>
								</svg>
								<span class="ms-2">{{ comments_viewed }}</span>
							</div>
						</div>
					</div>
					{% if review_status %}
						<div class="pr-blog-comments">
							<div class="pr-blog-post-comments-header d-flex flex-column flex-md-row align-items-md-center justify-content-md-between">
								<div class="fsz-20 fw-700 mb-4 mb-md-0">{{ text_comments }}</div>
								<button type="button" class="button button-primary br-7 px-5 fw-400" data-bs-toggle="modal" data-bs-target="#blogCommentModal">{{ text_add_comment }}</button>
							</div>
							<div class="pr-blog-post-comments pt-4">
								<div class="modal fade" id="blogCommentModal" tabindex="-1" aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">
											<div class="modal-header p-4 bg-grey">
												<h5 class="modal-title fsz-20 fw-700 d-flex align-items-center justify-content-between dark-text" id="blogCommentModalLabel">{{ text_write }}</h5>
												<button type="button" class="btn-close br-8 bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body p-4">
												<form method="post" enctype="multipart/form-data" id="form-comment">
													<div class="input-group">
														<span class="input-group-text" id="usernameIconBlogComment">
															<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
																<path d="M8.73803 10.9984H5.11457C2.84216 10.9984 1 12.8405 1 15.1129C1 15.4917 1.30703 15.7987 1.68576 15.7987H6.647M13.4308 10.8284L15.571 12.9685M10.8007 4.79794C10.8007 6.67584 9.27834 8.19817 7.40044 8.19817C5.52254 8.19817 4.00021 6.67584 4.00021 4.79794C4.00021 2.92004 5.52254 1.39771 7.40044 1.39771C9.27834 1.39771 10.8007 2.92004 10.8007 4.79794ZM11.546 16.3612L10.1232 16.5983C9.93373 16.6299 9.76942 16.4656 9.80101 16.2761L10.0381 14.8533C10.1204 14.3599 10.3547 13.9044 10.7085 13.5507L14.5084 9.75083C14.977 9.28216 15.7369 9.28216 16.2055 9.75083L16.6485 10.1938C17.1172 10.6625 17.1172 11.4223 16.6485 11.891L12.8486 15.6909C12.4949 16.0446 12.0395 16.279 11.546 16.3612Z" stroke="#5C6168" stroke-linecap="round" stroke-linejoin="round"></path>
															</svg>
														</span>
														<div class="form-floating">
															<input type="text" name="name" class="form-control" id="inputNameComment" placeholder="{{ entry_name }}" value="{{ customer_name }}"  aria-label="Username" aria-describedby="usernameIconBlogComment">
															<label class="px-3 secondary-text fsz-14" for="inputNameComment">{{ entry_name }}</label>
														</div>
													</div>
													<div class="form-group py-3">
														<textarea id="inputReviewComment" name="text" class="form-control" placeholder="{{ oct_article_your_comment }}" rows="7"></textarea>
													</div>
													<div class="pb-3 dark-text fsz-12 modal-small-text">{{ text_note }}</div>
													{% if captcha %}
														<div class="form-group">
															{{ captcha }}
														</div>
													{% endif %}
													<button type="button" id="button-comment" class="button button-primary button-large w-100 py-3 fsz-14">{{ button_continue }}</button>
												</form>
											</div>
										</div>
									</div>
								</div>
								<div id="article-comments" class="dark-text fsz-14"></div>
							</div>
						</div>
					{% endif %}
				</div>
			</div>
			{{ column_right }}
		</div>
	</main>
	{% if products %}
		{{ products }}
	{% endif %}
	{% if articles %}
	<div id="pr-related-article" class="pr-module-news mt-4 pr-module">
		<div class="pr-page-title fw-700 dark-text mb-3">{{ text_related_articles }}</div>
		<div class="pr-module-news-items d-flex align-items-lg-stretch gap-3 flex-wrap">
			{% for article in articles %}
				<div class="pr-module-news-item content-block p-0 d-flex flex-column overflow-hidden">
					<a href="{{ article.href }}" title="{{ article.name }}" class="pr-module-news-item-image">
						<img src="{{ article.thumb }}" class="img-fluid" alt="{{ article.name }}" width="{{ article.width }}" height="{{ article.height }}" loading="lazy" />
					</a>
					<div class="pr-module-news-item-caption d-flex flex-column justify-content-between gap-3 p-3 h-100">
						<a href="{{ article.href }}" class="pr-module-news-item-title dark-link fw-700 fsz-14 lh-sm">{{ article.name }}</a>
						<div class="pr-module-news-item-info d-flex align-items-center justify-content-between gap-3 fsz-12 grey-text">
							<div class="pr-module-news-item-info-date d-flex align-items-center gap-1">
								<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
									<path d="M1 4.67102H13M3.66667 0.671021V2.00435M10.3333 0.671021V2.00435M4 7.33769C4 7.52178 3.85076 7.67102 3.66667 7.67102C3.48257 7.67102 3.33333 7.52178 3.33333 7.33769M4 7.33769C4 7.15359 3.85076 7.00435 3.66667 7.00435C3.48257 7.00435 3.33333 7.15359 3.33333 7.33769M4 7.33769H3.33333M7.33333 7.33769C7.33333 7.52178 7.1841 7.67102 7 7.67102C6.81591 7.67102 6.66667 7.52178 6.66667 7.33769M7.33333 7.33769C7.33333 7.15359 7.1841 7.00435 7 7.00435C6.81591 7.00435 6.66667 7.15359 6.66667 7.33769M7.33333 7.33769H6.66667M10.6667 7.33769C10.6667 7.52178 10.5174 7.67102 10.3333 7.67102C10.1492 7.67102 10 7.52178 10 7.33769M10.6667 7.33769C10.6667 7.15359 10.5174 7.00435 10.3333 7.00435C10.1492 7.00435 10 7.15359 10 7.33769M10.6667 7.33769H10M4 10.671C4 10.8551 3.85076 11.0044 3.66667 11.0044C3.48257 11.0044 3.33333 10.8551 3.33333 10.671M4 10.671C4 10.4869 3.85076 10.3377 3.66667 10.3377C3.48257 10.3377 3.33333 10.4869 3.33333 10.671M4 10.671H3.33333M7.33333 10.671C7.33333 10.8551 7.1841 11.0044 7 11.0044C6.81591 11.0044 6.66667 10.8551 6.66667 10.671M7.33333 10.671C7.33333 10.4869 7.1841 10.3377 7 10.3377C6.81591 10.3377 6.66667 10.4869 6.66667 10.671M7.33333 10.671H6.66667M10.6667 10.671C10.6667 10.8551 10.5174 11.0044 10.3333 11.0044C10.1492 11.0044 10 10.8551 10 10.671M10.6667 10.671C10.6667 10.4869 10.5174 10.3377 10.3333 10.3377C10.1492 10.3377 10 10.4869 10 10.671M10.6667 10.671H10M3 13.3377H11C12.1046 13.3377 13 12.4423 13 11.3377V3.33769C13 2.23312 12.1046 1.33769 11 1.33769H3C1.89543 1.33769 1 2.23312 1 3.33769V11.3377C1 12.4423 1.89543 13.3377 3 13.3377Z" stroke="#9DA4AE" stroke-linecap="round" stroke-linejoin="round"></path>
								</svg>
								{{ article.date_added }}
							</div>
							<div class="pr-module-news-item-info-category d-flex align-items-center gap-1">
								<svg xmlns="http://www.w3.org/2000/svg" width="14" height="12" viewBox="0 0 14 12" fill="none">
									<path d="M2.8 11.4044H11.2C12.1941 11.4044 13 10.5985 13 9.60437V4.20437C13 3.21026 12.1941 2.40437 11.2 2.40437H7.84853C7.6894 2.40437 7.53679 2.34116 7.42426 2.22863L5.97574 0.780106C5.86321 0.667584 5.7106 0.60437 5.55147 0.60437H2.8C1.80589 0.60437 1 1.41026 1 2.40437V9.60437C1 10.5985 1.80589 11.4044 2.8 11.4044Z" stroke="#9DA4AE" stroke-linecap="round" stroke-linejoin="round"></path>
								</svg>
								{% set key = 0 %}
								{% for blog_category_name in article.blog_categories %}
									{% set key = key + 1 %}
									{{ blog_category_name }}{% if key < article.blog_categories|length %}, {% endif %}
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}
	{{ content_bottom }}
</div>
<script>
	$("#inputNameComment, #inputReviewComment").on("change paste keyup", function() {
		$(this).removeClass('error_style');
	});

	$('#article-comments').delegate('.pagination a', 'click', function(e) {
		const headerHeight = document.querySelector('header').offsetHeight;

	    e.preventDefault();
	    $('#article-comments').load(this.href);
        scrollToElement('.pr-blog-post-comments', null, -headerHeight);
	});

	$('#article-comments').load('index.php?route=octemplates/blog/oct_blogarticle/comment&blogarticle_id={{ blogarticle_id }}');

	$('#button-comment').on('click', function() {
		$.ajax({
			url: 'index.php?route=octemplates/blog/oct_blogarticle/write&blogarticle_id={{ blogarticle_id }}',
			type: 'post',
			dataType: 'json',
			cache: false,
			data: $('#form-comment').serialize(),
			beforeSend: function() {
				$('#button-comment').button('loading');
	            masked('body', true);

                $('#button-comment').data('original-content', $('#button-comment').html());
				$('#button-comment').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>').prop('disabled', true);
			},
			complete: function() {
				masked('body', false);

				setTimeout(function () {
					$('#button-comment').html($('#button-comment').data('original-content')).prop('disabled', false);
				}, 600);
			},
			success: function(json) {
				$('.alert-dismissible').remove();

				if (json['error']) {
					let errors = '';

					$.each(json['error'], function(i, val) {
						if (val) {
							$('#form-comment [name="' + i + '"]').addClass('error_style');
							errors += '<div class="alert-text-item">' + val + '</div>';
						}
					});

					prNotify('danger', errors);
				}

				if (json['success']) {
					prNotify('success', json['success']);
					$('#blogCommentModal').modal('hide');
					$('input[name=\'name\']').val('');
					$('textarea[name=\'text\']').val('');
					$('input[name=\'rating\']:checked').prop('checked', false);
				}
			}
		});
	});
</script>
{{ footer }}
